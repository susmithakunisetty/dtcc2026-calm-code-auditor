{
  "$schema": "https://calm.finos.org/release/1.2/meta/calm.json",
  "unique-id": "fineract-system",
  "name": "Apache Fineract System Architecture",
  "description": "Apache Fineract is an open-source core banking platform providing a flexible, extensible foundation for a wide range of financial services. This architecture represents the high-level system components and their interactions.",
  "metadata": {
    "version": "1.0.0",
    "created-by": "CALM Architecture Assistant",
    "created-date": "2026-02-16",
    "business-domain": "Financial Services",
    "system-type": "Core Banking Platform",
    "deployment-model": "Multi-tenant SaaS or On-Premise",
    "architecture-style": "RESTful API, CQRS, Multi-tenancy"
  },
  "nodes": [
    {
      "unique-id": "web-client-apps",
      "node-type": "webclient",
      "name": "Web Client Applications",
      "description": "Browser-based applications for tellers, branch operations, and customer self-service portals",
      "interfaces": [
        {
          "unique-id": "web-client-https-interface",
          "protocol": "HTTPS",
          "port": 443
        }
      ],
      "metadata": {
        "examples": [
          "Teller Application",
          "Branch Portal",
          "Online Banking Portal"
        ],
        "access-pattern": "Browser-based"
      }
    },
    {
      "unique-id": "mobile-client-apps",
      "node-type": "actor",
      "name": "Mobile Client Applications",
      "description": "Mobile applications for field staff, mobile banking, and mobile money integration",
      "interfaces": [
        {
          "unique-id": "mobile-client-https-interface",
          "protocol": "HTTPS",
          "port": 443
        }
      ],
      "metadata": {
        "examples": [
          "Field Officer App",
          "Mobile Banking App",
          "Agent App"
        ],
        "access-pattern": "Mobile native or hybrid"
      }
    },
    {
      "unique-id": "third-party-integrations",
      "node-type": "system",
      "name": "Third-Party Integrations",
      "description": "External systems including ATM/POS networks, mobile money operators, payment gateways, and other bank systems",
      "interfaces": [
        {
          "unique-id": "integration-api-interface",
          "protocol": "HTTPS",
          "port": 443
        }
      ],
      "metadata": {
        "examples": [
          "ATM/POS Networks",
          "Mobile Money Operators",
          "Payment Gateways",
          "Credit Bureaus"
        ],
        "integration-patterns": [
          "REST API",
          "Webhooks",
          "Batch Files"
        ]
      }
    },
    {
      "unique-id": "fineract-api-gateway",
      "node-type": "service",
      "name": "Fineract REST API Gateway",
      "description": "RESTful API layer that exposes all platform functionality. Handles authentication, authorization, and request routing.",
      "interfaces": [
        {
          "unique-id": "rest-api-interface",
          "protocol": "HTTPS",
          "port": 8443
        }
      ],
      "metadata": {
        "technology": [
          "JAX-RS",
          "Jersey",
          "Spring Security"
        ],
        "authentication": [
          "HTTP Basic",
          "OAuth2",
          "OIDC Federation"
        ],
        "api-style": "RESTful JSON",
        "stateless": true
      },
      "controls": {
        "mfa-authentication": {
          "description": "Multi-factor authentication for API access",
          "requirements": [
            {
              "requirement-url": "https://fineract.apache.org/controls/authentication-mfa.json",
              "config": {
                "mfa-factors": [
                  "password",
                  "OTP"
                ],
                "mfa-enforcement": "role-based",
                "token-expiry": "1 hour access token, 24 hour refresh token"
              }
            }
          ]
        },
        "api-rate-limiting": {
          "description": "API rate limiting to prevent DoS attacks",
          "requirements": [
            {
              "requirement-url": "https://fineract.apache.org/controls/rate-limiting.json",
              "config": {
                "requests-per-minute": 1000,
                "framework": "Resilience4j RateLimiter",
                "strategy": "token-bucket",
                "scope": "per-tenant"
              }
            }
          ]
        },
        "tls-encryption": {
          "description": "TLS encryption for all API communications",
          "requirements": [
            {
              "requirement-url": "https://fineract.apache.org/controls/tls-encryption.json",
              "config": {
                "protocol": "HTTPS",
                "minimum-version": "1.3",
                "cipher-suites": [
                  "TLS_AES_256_GCM_SHA384",
                  "TLS_CHACHA20_POLY1305_SHA256"
                ],
                "certificate-validation": true
              }
            }
          ]
        },
        "audit-logging": {
          "description": "Comprehensive audit logging of all API access",
          "requirements": [
            {
              "requirement-url": "https://fineract.apache.org/controls/audit-logging.json",
              "config": {
                "log-level": "comprehensive",
                "retention-period": "7 years",
                "immutability": "append-only",
                "compliance-framework": "SOC2",
                "logged-events": [
                  "authentication",
                  "authorization",
                  "data-access",
                  "configuration-changes"
                ]
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "fineract-platform-core",
      "node-type": "service",
      "name": "Fineract Platform Core",
      "description": "Core business logic engine implementing banking operations, command processing, and business rules. Implements CQRS pattern with command handlers and read services.",
      "details": {
        "detailed-architecture": "fineract-platform-detailed.architecture.json"
      },
      "interfaces": [
        {
          "unique-id": "internal-service-interface",
          "protocol": "Internal"
        }
      ],
      "metadata": {
        "architecture-patterns": [
          "CQRS",
          "Command Handlers",
          "Domain-Driven Design",
          "Maker-Checker"
        ],
        "runtime": "Java 21+",
        "framework": "Spring Boot 3.x",
        "key-capabilities": [
          "Portfolio Management",
          "Accounting",
          "User Administration",
          "Organization Management",
          "Product Configuration",
          "Batch Processing"
        ]
      },
      "controls": {
        "rbac-authorization": {
          "description": "Role-based access control for platform operations",
          "requirements": [
            {
              "requirement-url": "https://fineract.apache.org/controls/rbac.json",
              "config": {
                "authorization-framework": "Spring Security",
                "granularity": "fine-grained",
                "default-policy": "deny-all",
                "least-privilege": true,
                "segregation-of-duties": true,
                "role-hierarchy": true,
                "compliance-framework": "ISO27001"
              }
            }
          ]
        },
        "input-validation": {
          "description": "Input validation and injection prevention",
          "requirements": [
            {
              "requirement-url": "https://fineract.apache.org/controls/input-validation.json",
              "config": {
                "validation-framework": "Jakarta Validation",
                "sql-injection-prevention": "parameterized-queries",
                "xss-prevention": "output-encoding",
                "constraints": [
                  "NotNull",
                  "Size",
                  "Pattern",
                  "Email"
                ],
                "compliance-framework": "OWASP-Top-10"
              }
            }
          ]
        },
        "audit-logging": {
          "description": "Comprehensive audit trail of all operations",
          "requirements": [
            {
              "requirement-url": "https://fineract.apache.org/controls/audit-logging.json",
              "config": {
                "log-level": "comprehensive",
                "retention-period": "7 years",
                "immutability": "append-only",
                "storage-location": "m_portfolio_command_source",
                "logged-events": [
                  "create",
                  "update",
                  "delete",
                  "execute"
                ],
                "compliance-framework": "SOX"
              }
            }
          ]
        },
        "transaction-integrity": {
          "description": "ACID transaction guarantees",
          "requirements": [
            {
              "requirement-url": "https://fineract.apache.org/controls/transaction-integrity.json",
              "config": {
                "isolation-level": "REPEATABLE_READ",
                "atomicity": true,
                "consistency": true,
                "durability": true,
                "validation": "pre-commit"
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "tenant-database",
      "node-type": "database",
      "name": "Tenant Database",
      "description": "Multi-tenant database system storing all financial institution data. Each tenant has isolated data in separate schema or database.",
      "interfaces": [
        {
          "unique-id": "database-connection",
          "protocol": "JDBC",
          "port": 3306
        },
        {
          "unique-id": "postgresql-connection",
          "protocol": "JDBC",
          "port": 5432
        }
      ],
      "metadata": {
        "database-engines": [
          "MariaDB 11.5.2+",
          "PostgreSQL 17.0+"
        ],
        "isolation-model": "Separate Databases or Separate Schemas",
        "orm": "EclipseLink JPA",
        "extensibility": "Data Tables for custom fields",
        "control-requirements": {
          "backup": "Automated backups with PITR per ISO 27001:2022 A.12.3.1",
          "encryption": "Data-at-rest encryption per PCI DSS v4.0 Requirement 3.5.1",
          "access-control": "Restricted access per NIST 800-53 AC-3",
          "availability": "99.9% uptime with failover per SOC 2 A1.2"
        },
        "control-implementations": {
          "backup-frequency": "Every 6 hours",
          "backup-retention": "30 days snapshots, 7 years transaction logs",
          "point-in-time-recovery": true,
          "encryption-algorithm": "AES-256",
          "key-rotation": "Annual",
          "authentication": "Certificate-based or strong passwords",
          "connection-pooling": true,
          "max-connections": 100,
          "ssl-required": true,
          "replication": "Synchronous multi-master or master-replica",
          "failover-mode": "Automatic",
          "RTO": "< 5 minutes",
          "RPO": "< 1 minute"
        }
      }
    },
    {
      "unique-id": "batch-job-scheduler",
      "node-type": "service",
      "name": "Batch Job Scheduler",
      "description": "Scheduled job processing system for operations like COB (Close of Business), loan processing, reports generation, and data synchronization",
      "interfaces": [
        {
          "unique-id": "scheduler-interface",
          "protocol": "Internal"
        }
      ],
      "metadata": {
        "job-types": [
          "Close of Business (COB)",
          "Loan Interest Calculation",
          "Fee Processing",
          "Report Generation",
          "Data Archival"
        ],
        "scheduling": "Spring Scheduler"
      },
      "controls": {
        "circuit-breaker": {
          "description": "Resilience pattern for batch operations",
          "requirements": [
            {
              "requirement-url": "https://fineract.apache.org/controls/circuit-breaker.json",
              "config": {
                "framework": "Resilience4j",
                "failure-threshold": 5,
                "timeout": "30 seconds",
                "reset-timeout": "1 minute",
                "half-open-max-calls": 3
              }
            }
          ]
        },
        "audit-logging": {
          "description": "Batch job execution auditing",
          "requirements": [
            {
              "requirement-url": "https://fineract.apache.org/controls/audit-logging.json",
              "config": {
                "log-level": "comprehensive",
                "retention-period": "1 year",
                "immutability": "append-only",
                "logged-events": [
                  "job-start",
                  "job-end",
                  "job-failure"
                ],
                "compliance-framework": "SOC2"
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "event-bus",
      "node-type": "service",
      "name": "Event Bus",
      "description": "Internal event streaming and messaging system for asynchronous processing and system integration using the reliable event framework",
      "interfaces": [
        {
          "unique-id": "kafka-interface",
          "protocol": "Kafka",
          "port": 9092
        }
      ],
      "metadata": {
        "technology": [
          "Apache Kafka",
          "Spring Cloud Stream"
        ],
        "event-types": [
          "Domain Events",
          "Integration Events"
        ],
        "patterns": [
          "Event Sourcing",
          "Reliable Event Framework"
        ]
      }
    }
  ],
  "relationships": [
    {
      "unique-id": "web-clients-to-api",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "web-client-apps",
            "interfaces": [
              "web-client-https-interface"
            ]
          },
          "destination": {
            "node": "fineract-api-gateway",
            "interfaces": [
              "rest-api-interface"
            ]
          }
        }
      },
      "description": "Web clients connect to Fineract REST API over HTTPS",
      "protocol": "HTTPS",
      "metadata": {
        "authentication-required": true,
        "data-format": "JSON",
        "api-style": "REST"
      }
    },
    {
      "unique-id": "mobile-clients-to-api",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "mobile-client-apps",
            "interfaces": [
              "mobile-client-https-interface"
            ]
          },
          "destination": {
            "node": "fineract-api-gateway",
            "interfaces": [
              "rest-api-interface"
            ]
          }
        }
      },
      "description": "Mobile clients connect to Fineract REST API over HTTPS",
      "protocol": "HTTPS",
      "metadata": {
        "authentication-required": true,
        "data-format": "JSON",
        "api-style": "REST"
      }
    },
    {
      "unique-id": "third-party-to-api",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "third-party-integrations",
            "interfaces": [
              "integration-api-interface"
            ]
          },
          "destination": {
            "node": "fineract-api-gateway",
            "interfaces": [
              "rest-api-interface"
            ]
          }
        }
      },
      "description": "Third-party systems integrate via REST API",
      "protocol": "HTTPS",
      "metadata": {
        "authentication-required": true,
        "data-format": "JSON",
        "api-style": "REST"
      }
    },
    {
      "unique-id": "api-to-platform",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "fineract-api-gateway",
            "interfaces": [
              "rest-api-interface"
            ]
          },
          "destination": {
            "node": "fineract-platform-core",
            "interfaces": [
              "internal-service-interface"
            ]
          }
        }
      },
      "description": "API Gateway routes requests to Platform Core services",
      "metadata": {
        "pattern": "Request routing with security checks",
        "communication": "Internal Java method calls"
      }
    },
    {
      "unique-id": "platform-to-database",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "fineract-platform-core",
            "interfaces": [
              "internal-service-interface"
            ]
          },
          "destination": {
            "node": "tenant-database",
            "interfaces": [
              "database-connection",
              "postgresql-connection"
            ]
          }
        }
      },
      "description": "Platform Core performs CRUD operations on tenant databases",
      "protocol": "JDBC",
      "metadata": {
        "orm": "EclipseLink JPA",
        "connection-pooling": true,
        "transaction-management": "Spring Transactions"
      }
    },
    {
      "unique-id": "batch-to-platform",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "batch-job-scheduler",
            "interfaces": [
              "scheduler-interface"
            ]
          },
          "destination": {
            "node": "fineract-platform-core",
            "interfaces": [
              "internal-service-interface"
            ]
          }
        }
      },
      "description": "Batch jobs invoke platform services for scheduled operations",
      "metadata": {
        "execution-mode": "Scheduled",
        "communication": "Internal Java method calls"
      }
    },
    {
      "unique-id": "platform-to-events",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "fineract-platform-core",
            "interfaces": [
              "internal-service-interface"
            ]
          },
          "destination": {
            "node": "event-bus",
            "interfaces": [
              "kafka-interface"
            ]
          }
        }
      },
      "description": "Platform publishes domain events to event bus",
      "protocol": "AMQP",
      "metadata": {
        "pattern": "Event-driven architecture",
        "event-framework": "Reliable Event Framework",
        "messaging-system": "Apache Kafka",
        "control-requirements": {
          "event-delivery": "At-least-once semantics per Reliable Event Framework"
        },
        "control-implementations": {
          "delivery-semantics": "at-least-once",
          "acknowledgement": "Required",
          "retry-policy": "Exponential backoff",
          "dead-letter-queue": true
        }
      }
    },
    {
      "unique-id": "events-to-integrations",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "event-bus",
            "interfaces": [
              "kafka-interface"
            ]
          },
          "destination": {
            "node": "third-party-integrations",
            "interfaces": [
              "integration-api-interface"
            ]
          }
        }
      },
      "description": "Event bus triggers external integrations",
      "protocol": "HTTPS",
      "metadata": {
        "pattern": "Event-driven integration",
        "mechanism": "Webhooks"
      }
    }
  ]
}